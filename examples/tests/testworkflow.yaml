kind: TestWorkflowTemplate
apiVersion: testworkflows.testkube.io/v1
metadata:
  name: container-executor-k6-0.43.1
  namespace: testkube
spec:
  container:
    image: grafana/k6:0.43.1
  pod: {}

---

kind: TestWorkflow
apiVersion: testworkflows.testkube.io/v1
metadata:
  name: container-executor-k6-smoke
  namespace: testkube
  labels:
    core-tests: executors
    executor: container-executor-k6-0.43.1
    test-type: container-executor-k6-0-43-1-test
spec:
  use:
  - name: container-executor-k6-0.43.1
  content:
    git:
      uri: https://github.com/kubeshop/testkube
      revision: main
      paths:
      - test/k6/k6-smoke-test-without-envs.js
  container:
    workingDir: /data/repo/test/k6
  job:
    labels:
      core-tests: executors
      executor: container-executor-k6-0.43.1
      test-type: container-executor-k6-0-43-1-test
    activeDeadlineSeconds: 180
  steps:
  - name: Run tests
    run:
      args:
      - run
      - k6-smoke-test-without-envs.js
